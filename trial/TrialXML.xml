<?xml version="1.0" encoding="UTF-8" ?>
<Module>
  <ModulePrefs title="Talent Sprint">
    <Require feature="rpc"/>
    <Require feature="views"/>
  </ModulePrefs>
  <Content type="html">
    <![CDATA[
      <script src="//talkgadget.google.com/hangouts/_/api/hangout.js?v=1.1"></script>
<body style="background-color:#F0E68C;">
  <img src="https://github.com/tanujp/GadgetXML/raw/master/talent_sprint.gif"/>	 
  <h3>Welcome to TalentSprint</h3>	
  <a href="https://www.google.co.in/" target="_blank">CLICK HERE</a>
  <p id="participantsDiv">No Trainees joined</p> 

<script>	

var personIds;

function showParticipants(){
 
  var j = 0;
  var participants = gapi.hangout.getParticipants();
   var retVal = '<h4>Trainees: </h4><ul>';
  
  //if(participants[0])
  //{participants[0].setCameraMute(true);}
  
   for(var i=0;i<participants.length;i++) 
   { 
   var participant = participants[i];

    if (!participant.person) {
      retVal += '<li>A participant not running this app</li>';
    }
    
    retVal += '<li>' + participant.person.displayName + participant.person.id + '</li>';
    }

   retVal += '</ul>';

   var div = document.getElementById('participantsDiv');

   div.innerHTML = retVal;
   
   //var TopHeader = document.getElementById(':v3.ak');
   //TopHeader.parentNode.removeChild(TopHeader);
 
}  

gapi.hangout.onParticipantsDisabled.add(){
showParticipants();
}

 // When Gadget is ready...
  function init() {
  console.log('init');
  
  //When API is Ready
  gapi.hangout.onApiReady.add(
      function(eventObj) {
        if (eventObj.isApiReady) {
            console.log('API is Ready');
            this.showParticipants();}
         });
    }         



  // Wait for gadget to load.                                                       
  gadgets.util.registerOnLoadHandler(init);

</script>
</body>
    ]]>
  </Content>
</Module>